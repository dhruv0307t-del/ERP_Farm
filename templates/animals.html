<!-- templates/animals.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Animals â€” Cattle ERP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body { background:#f6f8fa; }
      .small-muted { color: #6c757d; font-size:.9rem; }
      .tag-link { text-decoration: none; font-weight:600; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-white shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="/dashboard">CattleERP</a>
        <div class="ms-auto">
          <a href="/home" class="btn btn-outline-secondary">Home</a>
          <a href="/logout" class="btn btn-outline-danger ms-2">Logout</a>
        </div>
      </div>
    </nav>

    <main class="container py-4">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h2>Animals</h2>
        <form class="d-flex" method="get" action="/animals">
          <input class="form-control me-2" type="search" placeholder="Search tag, breed, mother..." name="q" value="{{ q }}" />
          <button class="btn btn-outline-primary" type="submit">Search</button>
        </form>
      </div>

      <div class="row">
        <div class="col-lg-7">
          <div class="card mb-4">
            <div class="card-body p-2">
              <table class="table table-sm table-hover mb-0">
                <thead>
                  <tr>
                    <th>Tag</th>
                    <th>Type</th>
                    <th>Sex</th>
                    <th>Mother</th>
                    <th>Preg</th>
                    <th>Vacc</th>
                    <th>Health</th>
                    <th>Wt (kg)</th>
                    <th>Repro</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                {% for a in animals %}
                  <tr>
                    <td><a class="tag-link" href="/animals/{{ a.id }}">{{ a.tag_no }}</a></td>
                    <td>{{ a.cattle_type }}</td>
                    <td>{{ a.sex }}</td>
                    <td>{{ a.mother_tag_no or "-" }}</td>
                    <td>{% if a.pregnant %}Yes{% else %}No{% endif %}</td>
                    <td>{% if a.vaccinated %}Yes{% else %}No{% endif %}</td>
                    <td>{{ a.health or "-" }}</td>
                    <td>{{ "%.1f"|format(a.weight or 0.0) }}</td>
                    <td>{{ a.reproductions or 0 }}</td>
                    <td>
                      <a class="btn btn-sm btn-outline-secondary" href="/animals/{{ a.id }}/edit">Edit</a>

                      <form method="post" action="/animals/{{ a.id }}/delete" style="display:inline-block" onsubmit="return confirm('Delete this animal?');">
                        <button class="btn btn-sm btn-outline-danger">Delete</button>
                      </form>
                    </td>
                  </tr>
                {% else %}
                  <tr><td colspan="10" class="text-center small-muted">No animals found</td></tr>
                {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="col-lg-5">
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="mb-3">Add Animal</h5>
              <form method="post" action="/animals">
                <div class="mb-2">
                  <label class="form-label">Tag No</label>
                  <input name="tag_no" class="form-control" required />
                </div>

                <div class="row">
                  <div class="col-6 mb-2">
                    <label class="form-label">Sex</label>
                    <select name="sex" class="form-select">
                      <option value="F">F</option>
                      <option value="M">M</option>
                    </select>
                  </div>
                  <div class="col-6 mb-2">
                    <label class="form-label">Birthdate</label>
                    <input name="birthdate" type="date" class="form-control" required />
                  </div>
                </div>

                <div class="mb-2">
                  <label class="form-label">Breed (optional)</label>
                  <input name="breed_name" class="form-control" />
                </div>

                <div class="mb-2">
                  <label class="form-label">Type of Cattle</label>
                  <select name="cattle_type" class="form-select">
                    <option value="Cow">Cow</option>
                    <option value="Buffalo">Buffalo</option>
                    <option value="Other">Other</option>
                  </select>
                </div>

                <div class="mb-2">
                  <label class="form-label">Mother Tag No.</label>
                  <input name="mother_tag_no" class="form-control" />
                </div>

                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="lactating" name="lactating" value="on">
                  <label class="form-check-label" for="lactating">Lactating</label>
                </div>

                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="pregnant" name="pregnant" value="on">
                  <label class="form-check-label" for="pregnant">Pregnant</label>
                </div>

                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="vaccinated" name="vaccinated" value="on">
                  <label class="form-check-label" for="vaccinated">Vaccinated</label>
                </div>

                <div class="mb-2">
                  <label class="form-label">Health notes</label>
                  <input name="health" class="form-control" />
                </div>

                <div class="row">
                  <div class="col-6 mb-2">
                    <label class="form-label">Weight (kg)</label>
                    <input name="weight" type="number" step="0.1" class="form-control" />
                  </div>
                  <div class="col-6 mb-2">
                    <label class="form-label">No. of Reproductions</label>
                    <input name="reproductions" type="number" class="form-control" />
                  </div>
                </div>

                <div class="d-grid">
                  <button class="btn btn-success">Add Animal</button>
                </div>
              </form>
            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <h6>Tips</h6>
              <ul class="small-muted mb-0">
                <li>Use consistent tag numbers.</li>
                <li>Fill mother tag for pedigree tracking.</li>
                <li>Vaccination reminders can be added on animal page.</li>
              </ul>
            </div>
          </div>
        </div>

      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
